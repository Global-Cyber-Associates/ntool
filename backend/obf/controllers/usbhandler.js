(function(_0x50f0aa,_0x292234){const _0x356ddf=a16_0x639c,_0x5c9970=_0x50f0aa();while(!![]){try{const _0xb5e870=-parseInt(_0x356ddf(0x194))/0x1*(-parseInt(_0x356ddf(0x18e))/0x2)+-parseInt(_0x356ddf(0x1ae))/0x3+-parseInt(_0x356ddf(0x1a8))/0x4+parseInt(_0x356ddf(0x196))/0x5*(-parseInt(_0x356ddf(0x1a3))/0x6)+-parseInt(_0x356ddf(0x195))/0x7+parseInt(_0x356ddf(0x199))/0x8*(parseInt(_0x356ddf(0x19d))/0x9)+-parseInt(_0x356ddf(0x187))/0xa*(-parseInt(_0x356ddf(0x1a7))/0xb);if(_0xb5e870===_0x292234)break;else _0x5c9970['push'](_0x5c9970['shift']());}catch(_0x57487a){_0x5c9970['push'](_0x5c9970['shift']());}}}(a16_0x3179,0x48df8));import a16_0x5321c4 from'../models/usbdevices.js';function a16_0x639c(_0x936e0b,_0x4b951d){const _0x317949=a16_0x3179();return a16_0x639c=function(_0x639c9a,_0x8dc36d){_0x639c9a=_0x639c9a-0x184;let _0xf54013=_0x317949[_0x639c9a];return _0xf54013;},a16_0x639c(_0x936e0b,_0x4b951d);}import a16_0x166c52 from'fs';import a16_0x2a00d5 from'path';export async function checkUsbStatus(_0x3c0625,_0x150be0,_0x323fc8){const _0x4c71ab=a16_0x639c;if(!_0x150be0||_0x150be0[_0x4c71ab(0x19c)]===0x0)return[];try{const _0x5335f7=a16_0x2a00d5[_0x4c71ab(0x1a0)](process[_0x4c71ab(0x1aa)](),'received.json');a16_0x166c52['writeFileSync'](_0x5335f7,JSON[_0x4c71ab(0x18a)]({'agentId':_0x3c0625,'timestamp':new Date(),'devices':_0x150be0},null,0x2),_0x4c71ab(0x184)),console[_0x4c71ab(0x1a9)](_0x4c71ab(0x18d)+_0x5335f7);}catch(_0x244122){console[_0x4c71ab(0x1a2)](_0x4c71ab(0x19a),_0x244122);}let _0x1af189=await a16_0x5321c4[_0x4c71ab(0x193)]({'agentId':_0x3c0625});if(!_0x1af189)_0x1af189=new a16_0x5321c4({'agentId':_0x3c0625,'data':{'connected_devices':[]}}),await _0x1af189[_0x4c71ab(0x1a4)](),console[_0x4c71ab(0x1a9)](_0x4c71ab(0x198)+_0x3c0625);else!_0x1af189['data']&&(_0x1af189[_0x4c71ab(0x192)]={'connected_devices':[]},await _0x1af189[_0x4c71ab(0x1a4)](),console['log'](_0x4c71ab(0x19f)+_0x3c0625));const _0x597bf4=[];for(const _0x3e84b5 of _0x150be0){const _0xddbed0=_0x3e84b5[_0x4c71ab(0x190)]||_0x3e84b5['pnpid']||'unknown';let _0x27a83a=_0x1af189['data'][_0x4c71ab(0x1a6)][_0x4c71ab(0x191)](_0x2c1e40=>_0x2c1e40[_0x4c71ab(0x190)]===_0xddbed0);if(_0x27a83a)_0x597bf4[_0x4c71ab(0x18c)]({..._0x3e84b5,'status':_0x27a83a[_0x4c71ab(0x19b)]}),console['log'](_0x4c71ab(0x197)+_0xddbed0+_0x4c71ab(0x18b)+_0x27a83a[_0x4c71ab(0x19b)]);else{const _0x1bf4c0={'drive_letter':_0x3e84b5[_0x4c71ab(0x19e)]||'','vendor_id':_0x3e84b5[_0x4c71ab(0x1ad)]||'','product_id':_0x3e84b5[_0x4c71ab(0x1a1)]||'','description':_0x3e84b5[_0x4c71ab(0x1a5)]||'','serial_number':_0xddbed0,'status':_0x4c71ab(0x18f),'last_seen':new Date()};_0x1af189[_0x4c71ab(0x192)][_0x4c71ab(0x1a6)][_0x4c71ab(0x18c)](_0x1bf4c0),_0x597bf4[_0x4c71ab(0x18c)]({..._0x3e84b5,'status':_0x4c71ab(0x18f)}),console[_0x4c71ab(0x1a9)](_0x4c71ab(0x189)+_0xddbed0+_0x4c71ab(0x185));}}return await _0x1af189[_0x4c71ab(0x1a4)](),console[_0x4c71ab(0x1a9)](_0x4c71ab(0x188),_0x3c0625),_0x323fc8&&_0x323fc8[_0x4c71ab(0x186)]&&(_0x323fc8['emit'](_0x4c71ab(0x1ac),{'devices':_0x597bf4}),console[_0x4c71ab(0x1a9)](_0x4c71ab(0x1ab),_0x597bf4)),_0x597bf4;}function a16_0x3179(){const _0x46fdb8=['[‚ÑπÔ∏è]\x20Initialized\x20empty\x20data\x20object\x20for\x20agentId=','join','product_id','error','4884LuwlWM','save','description','connected_devices','80146YOZCYF','2213112bmEene','log','cwd','[üì°]\x20USB\x20statuses\x20sent\x20back\x20to\x20agent:','usb_validation','vendor_id','186729xkkjTP','utf-8','\x20‚Üí\x20status:\x20WaitingForApproval','connected','1150qBBKqy','[‚úÖ]\x20USB\x20statuses\x20updated\x20for\x20agent:','[üÜï]\x20New\x20USB\x20added:\x20','stringify','\x20‚Üí\x20status:\x20','push','[üíæ]\x20Received\x20USB\x20devices\x20logged\x20to:\x20','499066wUNshw','WaitingForApproval','serial_number','find','data','findOne','1ZoGRRn','472976IZDRRh','1735aXQEIg','[‚ÑπÔ∏è]\x20USB\x20exists:\x20','[üÜï]\x20Agent\x20document\x20created\x20for\x20agentId=','32PwxkYA','‚ùå\x20Failed\x20to\x20write\x20received.json:','status','length','397377enjoEj','drive_letter'];a16_0x3179=function(){return _0x46fdb8;};return a16_0x3179();}